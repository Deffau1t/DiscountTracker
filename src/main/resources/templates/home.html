<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Личный кабинет - Discount Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .btn-outline-dark {
            border-width: 2px;
            transition: all 0.3s;
        }
        .btn-outline-dark:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .price-up {
            color: #dc3545;
        }
        .price-down {
            color: #198754;
        }
        .notification-badge {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
        }
    </style>
</head>
<body class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <a th:href="@{${watchListUrl}}" class="btn btn-outline-dark me-2">
                <i class="fas fa-bell"></i> Мои уведомления
            </a>
            <a th:href="@{${addWatchUrl}}" class="btn btn-outline-dark me-2">
                <i class="fas fa-plus"></i> Добавить товар
            </a>
            <a th:href="@{${recommendationsUrl}}" class="btn btn-outline-dark me-2">
                <i class="fas fa-heart"></i> Рекомендации
            </a>

            <a th:href="@{${logoutUrl}}" class="btn btn-outline-dark">
                <i class="fas fa-sign-out-alt"></i> Выйти
            </a>
        </div>
    </div>

    <div class="card">
        <div class="card-header bg-dark text-white">
            <i class="fas fa-list-ul"></i> Отслеживаемые товары
        </div>
        <div class="card-body">
            <table class="table table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>Название</th>
                        <th>Источник</th>
                        <th>Желаемая цена</th>
                        <th>Статус</th>
                        <th>Последнее уведомление</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="notification : ${notifications}">
                        <td th:text="${notification.product.name}"></td>
                        <td>
                            <span class="badge bg-dark" th:text="${notification.product.source}"></span>
                        </td>
                        <td th:text="${#numbers.formatDecimal(notification.threshold, 1, 'WHITESPACE', 2, 'POINT') + ' ₽'}"></td>
                        <td>
                            <span th:if="${notification.notified}" 
                                  class="badge bg-success notification-badge">
                                <i class="fas fa-bell"></i> Уведомлено
                            </span>
                            <span th:unless="${notification.notified}" 
                                  class="badge bg-secondary notification-badge">
                                <i class="fas fa-bell-slash"></i> Ожидание
                            </span>
                        </td>
                        <td th:text="${notification.lastNotified != null ? #temporals.format(notification.lastNotified, 'dd.MM.yyyy HH:mm') : '-'}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
